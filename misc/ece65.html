<!DOCTYPE html>
<html lang="en" class="h-100">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>ECE 65 reference sheet</title>
    <meta
      name="description"
      content="hmm maybe i shouldn't have spent this much effort on drawing circuits with tikz"
    />

    <link rel="stylesheet" type="text/css" href="/sheep3.css" />
    <script src="/sheep3.js" charset="utf-8"></script>

    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/css/bootstrap.min.css"
      integrity="sha384-TX8t27EcRE3e/ihU7zmQxVncDAy5uIKz4rEkgIXeMed4M0jlfIDPvg6uqKI2xXr2"
      crossorigin="anonymous"
    />
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/katex@0.12.0/dist/katex.min.css"
      integrity="sha384-AfEj0r4/OFrOo5t7NnNe46zW/tFgW6x/bCJG8FqQCEo3+Aro6EYUG4+cU+KJWu/X"
      crossorigin="anonymous"
    />

    <style media="screen">
      /* https://tailwindcss.com/docs/customizing-colors */
      :root {
        --heading: #e2e8f0;
        --subheading: #e2e8f0;
        color-scheme: dark;
      }
      body {
        background-color: #0f172a;
        color: #94a3b8;
      }
      h1,
      h2,
      h3 {
        color: #e2e8f0;
      }
      .math {
        margin: 0;
        font: inherit;
        font-family: monospace;
        white-space: pre-wrap;
        color: #f8fafc;
      }
      pre.math {
        max-width: 100%;
        overflow-x: auto;
      }
      .katex-display,
      .katex-display > .katex {
        text-align: left;
      }
      .katex .text {
        color: #94a3b8;
        font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto,
          'Helvetica Neue', Arial, 'Noto Sans', sans-serif, 'Apple Color Emoji',
          'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';
        font-size: 1rem;
      }
      td {
        padding: 10px;
      }
      a {
        color: #38bdf8;
      }
      .warning {
        color: #eab308;
      }
      .figure-caption {
        color: #94a3b8;
      }

      h2 {
        color: var(--heading);
      }
      h3 {
        color: var(--subheading);
      }
      /* 300 and 400 */
      .opamp {
        --heading: #fda4af;
        --subheading: #fb7185;
      }
      .diode {
        --heading: #f9a8d4;
        --subheading: #f472b6;
      }
      .zener {
        --heading: #f0abfc;
        --subheading: #e879f9;
      }
      .half-rectifier,
      .full-rectifier,
      .clipper,
      .peak-detector,
      .clamp {
        --heading: #d8b4fe;
        --subheading: #c084fc;
      }
      .bjt {
        --heading: #a5b4fc;
        --subheading: #818cf8;
      }
      .mosfet {
        --heading: #93c5fd;
        --subheading: #60a5fa;
      }
      .small-signal {
        --heading: #67e8f9;
        --subheading: #22d3ee;
      }
    </style>
  </head>

  <body class="d-flex flex-column h-100">
    <main role="main" class="container flex-shrink-0">
      <h1 class="mt-5">ECE 65 reference sheet</h1>
      <p class="lead">idk</p>
      <p>uhh</p>

      <section class="opamp">
        <img src="./circuits/opamp.svg" class="float-right img-fluid" />
        <h2>Op-amps</h2>
        <pre class="math">
          v_o = A(v_+ - v_-)
        </pre>
        <pre class="math">
          i_- = i_+ = 0
        </pre>
        <p>The op-amp has both a maximum output voltage and current.</p>
        <pre class="math">
          V_{s^-} < V_{sat^-} \leq v_o \leq V_{sat^+} < V_{s^+}
        </pre>
        <h3>Negative feedback</h3>
        <div class="row">
          <figure class="col figure">
            <img
              src="./circuits/opamp-gain-neg.svg"
              class="figure-img img-fluid"
            />
            <figcaption class="figure-caption">Negative gain</figcaption>
          </figure>
          <figure class="col figure">
            <img
              src="./circuits/opamp-gain-pos.svg"
              class="figure-img img-fluid"
            />
            <figcaption class="figure-caption">Positive gain</figcaption>
          </figure>
        </div>
        <pre class="math">
          v_+ = v_-
        </pre>
      </section>

      <section class="diode">
        <h2>Diodes</h2>
        <div class="row">
          <div class="col">
            <h3>On</h3>
            <pre class="math">v_D = V_{D_0}</pre>
            <p>if <code class="math">i_D \geq 0</code>.</p>
          </div>
          <div class="col">
            <h3>Off</h3>
            <pre class="math">i_D = 0</pre>
            <p>if <code class="math">v_D < V_{D_0}</code>.</p>
          </div>
          <div class="col text-center">
            <img src="./circuits/diode.svg" class="img-fluid" />
            <img src="./circuits/diode-iv.svg" class="img-fluid" />
          </div>
        </div>
      </section>

      <section class="zener">
        <h2>Zener</h2>
        <div class="row">
          <div class="col">
            <h3>On</h3>
            <pre class="math">v_D = V_{D_0}</pre>
            <p>if <code class="math">i_D \geq 0</code>.</p>
          </div>
          <div class="col">
            <h3>Off</h3>
            <pre class="math">i_D = 0</pre>
            <p>if <code class="math">-V_Z < v_D < V_{D_0}</code>.</p>
          </div>
          <div class="col">
            <h3>Zener</h3>
            <pre class="math">v_D = -V_Z</pre>
            <p>if <code class="math">i_D \leq 0</code>.</p>
          </div>
          <div class="col text-center">
            <img src="./circuits/zener-diode.svg" class="img-fluid" />
            <img src="./circuits/zener-iv.svg" class="img-fluid" />
          </div>
        </div>
      </section>

      <section class="half-rectifier">
        <h2>Half-wave rectifier</h2>
        <p>
          When <code class="math">v_i \geq V_{D_0}</code>, the diode is on, and
          <code class="math">v_o = v_i - V_{D_0}</code>.
        </p>
        <p>
          When <code class="math">v_i < V_{D_0}</code>, the diode is off, and
          <code class="math">v_o = 0</code>.
        </p>
        <div class="row">
          <div class="col">
            <h3>Circuit</h3>
            <img src="./circuits/half-rectifier.svg" class="img-fluid" />
          </div>
          <div class="col">
            <h3>Transfer</h3>
            <img
              src="./circuits/half-rectifier-transfer.svg"
              class="img-fluid"
            />
          </div>
          <div class="col">
            <h3>Output</h3>
            <img
              src="./circuits/half-rectifier-voltage.svg"
              class="img-fluid"
            />
          </div>
        </div>
        <p>
          Flipping the diode upside down flips the transfer function around.
        </p>
      </section>

      <section class="full-rectifier">
        <h2>Full-wave rectifier</h2>
        <div class="row">
          <div class="col">
            <h3>Circuit</h3>
            <img src="./circuits/full-rectifier.svg" class="img-fluid" />
          </div>
          <div class="col">
            <h3>Transfer</h3>
            <img
              src="./circuits/full-rectifier-transfer.svg"
              class="img-fluid"
            />
          </div>
          <div class="col">
            <h3>Output</h3>
            <img
              src="./circuits/full-rectifier-voltage.svg"
              class="img-fluid"
            />
          </div>
        </div>
      </section>

      <section class="clipper">
        <h2>Clipper</h2>
        <p>
          When <code class="math">v_i \geq V_{D_0}</code>, the diode is on, and
          <code class="math">v_o = V_{D_0}</code>.
        </p>
        <p>
          When <code class="math">v_i < V_{D_0}</code>, the diode is off, and
          <code class="math">v_o = v_i</code>.
        </p>
        <div class="row flex-wrap">
          <div class="col">
            <img src="./circuits/clipper-default.svg" class="img-fluid" />
            <pre class="math">
              v_o \leq V_{D_0}
            </pre>
          </div>
          <div class="col">
            <img src="./circuits/clipper-vdc.svg" class="img-fluid" />
            <pre class="math">
              v_o \leq V_{D_0} + V_{DC}
            </pre>
          </div>
          <div class="col">
            <img src="./circuits/clipper-zener-up.svg" class="img-fluid" />
            <pre class="math">
              v_o \leq V_{D_0} + V_Z
            </pre>
          </div>
          <div class="col">
            <img src="./circuits/clipper-zener-down.svg" class="img-fluid" />
            <pre class="math">
              v_o \geq -V_{D_0} - V_Z
            </pre>
          </div>
          <div class="col-sm-6">
            <img src="./circuits/clipper-vdc-2.svg" class="img-fluid" />
            <pre class="math">
              -V_{D_0} - V_{DC_2} \leq v_o \leq V_{D_0} + V_{DC_1}
            </pre>
          </div>
          <div class="col">
            <img src="./circuits/clipper-two-zeners.svg" class="img-fluid" />
            <pre class="math">
              -V_{D_0} - V_{Z_2} \leq v_o \leq V_{D_0} + V_{Z_1}
            </pre>
          </div>
        </div>
        <div class="row">
          <div class="col">
            <h3>Circuit</h3>
            <img src="./circuits/clipper.svg" class="img-fluid" />
          </div>
          <div class="col">
            <h3>Transfer</h3>
            <img src="./circuits/clipper-transfer.svg" class="img-fluid" />
          </div>
          <div class="col">
            <h3>Output</h3>
            <img src="./circuits/clipper-voltage.svg" class="img-fluid" />
          </div>
        </div>
      </section>

      <section class="peak-detector">
        <h2>Peak detector</h2>
        <div class="row">
          <div class="col">
            <h3>Circuit</h3>
            <img src="./circuits/peak-detector.svg" class="img-fluid" />
            <p>A load resistor will make the capacitor leak voltage.</p>
          </div>
          <div class="col">
            <h3>Output</h3>
            <img src="./circuits/peak-detector-voltage.svg" class="img-fluid" />
            <p>
              The shape of the output signal depends on
              <code class="math">\frac{\tau}{T}</code>. As
              <code class="math">\frac{\tau}{T}</code> decreases, the circuit
              departs from a peak detector.
            </p>
            <ul>
              <li>
                <p>
                  An ideal <code class="math">\frac{\tau}{T} \to \infty</code>.
                </p>
              </li>
              <li>
                <p>A good <code class="math">\frac{\tau}{T} >> 1</code>.</p>
              </li>
              <li>
                <p>
                  For <code class="math">\frac{\tau}{T} << 1</code>, the
                  capacitor discharges very fast, and the output resembles a
                  rectifier circuit.
                </p>
              </li>
            </ul>
          </div>
        </div>
      </section>

      <section class="clamp">
        <h2>Clamp</h2>
        <p>
          Identical to the peak detector circuit except the output voltage is
          taken from the diode instead.
        </p>
        <div class="row flex-wrap">
          <div class="col">
            <img src="./circuits/clamp-default.svg" class="img-fluid" />
            <pre class="math">
              v_o = v_i - (V_p - V_{D_0})
            </pre>
          </div>
          <div class="col">
            <img src="./circuits/clamp-vdc.svg" class="img-fluid" />
            <pre class="math">
              v_o = v_i - (V_p - V_{D_0} - V_{DC})
            </pre>
          </div>
          <div class="col">
            <img src="./circuits/clamp-zener.svg" class="img-fluid" />
            <pre class="math">
              v_o = v_i - (V_p - V_{D_0} - V_Z)
            </pre>
          </div>
          <div class="col">
            <img src="./circuits/clamp-reversed.svg" class="img-fluid" />
            <pre class="math">
              v_o = v_i + (V_p - V_{D_0})
            </pre>
          </div>
        </div>
        <div class="row">
          <div class="col">
            <h3>Circuit</h3>
            <img src="./circuits/clamp.svg" class="img-fluid" />
          </div>
          <div class="col">
            <h3>Output</h3>
            <img src="./circuits/clamp-voltage.svg" class="img-fluid" />
          </div>
        </div>
      </section>

      <section class="bjt">
        <h2>BJTs</h2>
        <p>
          The arrow is on the emitter node and points in the direction of the
          emitter current.
        </p>
        <div class="row">
          <figure class="col figure">
            <img src="./circuits/npn.svg" class="img-fluid" />
            <figcaption class="figure-caption">NPN transistor.</figcaption>
          </figure>
          <figure class="col figure">
            <img src="./circuits/pnp.svg" class="img-fluid" />
            <figcaption class="figure-caption">PNP transistor.</figcaption>
          </figure>
        </div>
        <div class="row">
          <div class="col-4">
            <h3>Off</h3>
            <p>
              <code class="math">i_B = 0, i_C = 0</code>
              <br />
              if <code class="math">v_{BE} < V_{D_0}</code> (NPN) or
              <code class="math">v_{EB} < V_{D_0}</code> (PNP).
            </p>
          </div>
          <div class="col-8">
            <h3>On</h3>
            <p>
              <code class="math">v_{BE} = V_{D_0}</code> (NPN) or
              <code class="math">v_{EB} = V_{D_0}</code> (PNP) if
              <code class="math">i_B \geq 0</code>.
            </p>
            <div class="row">
              <div class="col">
                <h3>Active</h3>
                <p>
                  <code class="math">i_C = \beta i_B</code> <br />
                  if <code class="math">v_{CE} \geq V_{D_0}</code> (NPN) or
                  <code class="math">v_{EC} \geq V_{D_0}</code> (PNP).
                </p>
              </div>
              <div class="col">
                <h3>Saturation</h3>
                <p>
                  <code class="math">v_{CE} = V_{sat}</code> (NPN) or
                  <code class="math">v_{EC} = V_{sat}</code> (PNP) <br />
                  if <code class="math">i_C < \beta i_B</code>.
                </p>
              </div>
            </div>
          </div>
        </div>
      </section>

      <section class="mosfet">
        <h2>MOSFETs</h2>
        <p>
          The arrow is on the source node and points in the direction of the
          drain current.
        </p>
        <div class="row">
          <div class="col">
            <h3>NMOS</h3>
            <img src="./circuits/nmos.svg" class="img-fluid" />
            <pre class="math">V_{OV} = v_{GS} - V_{tn}</pre>
          </div>
          <div class="col">
            <h3>PMOS</h3>
            <img src="./circuits/pmos.svg" class="img-fluid" />
            <pre class="math">V_{OV} = v_{SG} - |V_{tp}|</pre>
          </div>
        </div>
        <div class="row">
          <div class="col">
            <h3>Off</h3>
            <pre class="math">i_D = 0</pre>
            <p>
              if
              <code class="math">V_{OV} < 0</code>.
            </p>
          </div>
          <div class="col">
            <h3>Triode</h3>
            <pre class="math">
              i_D = 0.5 \mu_n \, C_{ox} \, \dfrac{W}{L} \left(2 V_{OV} v_{DS} - v_{DS}^2\right)
            </pre>
            <pre class="math">
              i_D = 0.5 \mu_p \, C_{ox} \, \dfrac{W}{L} \left(2 V_{OV} v_{SD} - v_{SD}^2\right)
            </pre>
            <p>
              if
              <code class="math">V_{OV} \geq 0</code> and <br />
              <code class="math">v_{DS} \leq V_{OV}</code> (NMOS) or
              <code class="math">v_{SD} \leq V_{OV}</code> (PMOS).
            </p>
          </div>
          <div class="col">
            <h3>Saturation (active)</h3>
            <pre class="math">
              i_D = 0.5 \mu_n \, C_{ox} \, \dfrac{W}{L} \cdot V_{OV}^2 \left(1 + \lambda v_{DS}\right)
            </pre>
            <pre class="math">
              i_D = 0.5 \mu_p \, C_{ox} \, \dfrac{W}{L} \cdot V_{OV}^2 \left(1 + \lambda v_{SD}\right)
            </pre>
            <p>
              if
              <code class="math">V_{OV} \geq 0</code> and <br />
              <code class="math">v_{DS} \geq V_{OV}</code> (NMOS) or
              <code class="math">v_{SD} \geq V_{OV}</code> (PMOS).
            </p>
          </div>
        </div>
      </section>

      <section class="small-signal">
        <h2>Small signal model</h2>
        <p>For the bias (DC) circuit, capacitors are open.</p>
        <p>
          For the small signal circuit, capacitors are shorted and sources are
          turned off.
        </p>
        <p>
          For transistor amplifier configurations, "common" refers to the
          grounded pin. Input is connected to base/gate, and output is taken
          from the non-grounded pin.
        </p>
        <div class="row">
          <div class="col">
            <h3>BJTs</h3>
            <pre class="math">g_m = \frac{I_C}{V_T}</pre>
            <pre class="math">r_o = \frac{V_A}{I_C}</pre>
            <pre class="math">r_\pi = \frac{V_T}{I_B} = \frac{\beta}{g_m}</pre>
          </div>
          <div class="col">
            <h3>MOSFETs</h3>
            <pre class="math">g_m = \frac{2I_D}{V_{OV}}</pre>
            <pre class="math">r_o = \frac{1}{\lambda I_D}</pre>
          </div>
        </div>
        <div class="row">
          <div class="col">
            <h3>Common collector</h3>
            <pre class="math">
              A_{vo} = \frac{g_m (R_E \parallel r_o)}{1 + g_m (R_E \parallel r_o)}
            </pre>
            <pre class="math">
              R_o = \frac{1}{g_m} \parallel r_\pi \parallel R_E \parallel r_o
            </pre>
            <pre class="math">
              R_i = R_B \parallel (r_\pi + (\beta + 1)(r_o \parallel R_E \parallel R_L))
            </pre>
            <p>Also known as an emitter follower.</p>
          </div>
          <div class="col">
            <h3>Common drain</h3>
            <pre class="math">
              A_{vo} = \frac{g_m (R_S \parallel r_o)}{1 + g_m (R_S \parallel r_o)}
            </pre>
            <pre class="math">
              R_o = \frac{1}{g_m} \parallel R_S \parallel r_o
            </pre>
            <pre class="math">R_i = R_G</pre>
            <p>Also known as a source follower.</p>
          </div>
        </div>
        <div class="row">
          <div class="col">
            <h3>Common emitter</h3>
            <pre class="math">A_{vo} = -g_m (R_C \parallel r_o)</pre>
            <pre class="math">R_o = R_C \parallel r_o</pre>
            <pre class="math">R_i = R_B \parallel r_\pi</pre>
            <p>With an emitter resistor:</p>
            <pre class="math">
              A_{vo} = \frac{-R_C}{R_E + \left(1 + \dfrac{R_C}{r_o}\right) \dfrac{R_E + r_\pi}{\beta}}
            </pre>
            <pre class="math">
              R_o = \frac
                {(r_\pi \parallel R_E) + \frac{1}{g_m} \parallel r_o}
                {\dfrac{\dfrac{1}{g_m} \parallel r_o}{R_C \parallel r_o} + \dfrac{r_\pi \parallel R_E}{R_C}}
            </pre>
            <pre class="math">
              R_i = R_B \parallel \left(R_E + r_\pi + \frac{\beta R_E}{1 + \frac{R_E + R_C \parallel R_L}{r_o}}\right)
            </pre>
          </div>
          <div class="col">
            <h3>Common source</h3>
            <pre class="math">A_{vo} = -g_m (R_D \parallel r_o)</pre>
            <pre class="math">R_o = R_D \parallel r_o</pre>
            <pre class="math">R_i = R_G</pre>
            <p>With a source resistor:</p>
            <pre class="math">
              A_{vo} = \frac{-g_m R_D}{1 + g_m R_S + \dfrac{R_D}{r_o}}
            </pre>
            <pre class="math">R_o = R_D \parallel (r_o \, (1 + g_m R_S))</pre>
            <pre class="math">R_i = R_G</pre>
          </div>
        </div>
      </section>
    </main>

    <script type="module" type="text/javascript">
      import katex from 'https://cdn.jsdelivr.net/npm/katex@0.12.0/dist/katex.mjs'
      for (const math of document.getElementsByClassName('math')) {
        katex.render(math.textContent, math, {
          throwOnError: true,
          displayMode: math.tagName === 'PRE'
        })
      }
    </script>
  </body>
</html>
